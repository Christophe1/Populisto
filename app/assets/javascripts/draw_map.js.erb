
// var map;
// var markers = [];

function initialize_google_maps() {

    // var user_longitude = $("#user-position").attr("data-lng");
    // var user_latitude = $("#user-position").attr("data-lat");

    // var currentlatlng = new google.maps.LatLng(user_latitude, user_longitude);

//below uses decimals instead of string values, like above,
//and I was told to use decimals. Works ok in Chrome with strings, but
//might be problems in some browsers.
    var $position = $("#user-position"),
    lat = $position.attr("data-lat"),
    lng = $position.attr("data-lng");

var currentlatlng = new google.maps.LatLng( +lat, +lng );


    var zoom = 10;
    var myOptions = {
      zoom: zoom,
      center: currentlatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP, // ROADMAP, SATELLITE, HYBRID
        streetViewControl: false,
        minZoom: 1,
        // don't want people to be able to hone in on others' addresses too specifically.
        maxZoom: 13
      };


      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      // if you want a marker, get rid of the icon code, below. At present the
      //transparent image is used, from the assets folder.
      var marker = new google.maps.Marker({map: map, position: currentlatlng, icon:'<%= asset_path('1x1.png') %>'});
    // map.setCenter(currentlatlng);
    // map.setZoom(zoom);

// <%= asset_path('1x1.png') %>

      var circle = new google.maps.Circle({
        map: map,
        fillOpacity: 0,
        strokeWeight: 2,
        strokeOpacity: 0.7,
        radius: 20000
      });
      circle.bindTo('center', marker, 'position');
    }

// function show_markers() {
//   // console.log("show markers");
//   if (markers)
//     for(i in markers) {
//       markers[i].setMap(map);
//     }
//   }

  // function add_marker(location) {
  //   // console.log("add marker");
  //   marker = new google.maps.Marker({
  //     position: location,
  //     map: map
  //   });
  //   markers.push(marker);
  //   markers.setVisible(true);
  // }
